"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[550],{6615:(e,t,s)=>{s.d(t,{Z:()=>o});var r=s(7557),a=s(9526),n=s(5092);const i=({when:e,message:t})=>((0,a.useEffect)((()=>{if(e){const e=e=>{e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}}),[e]),(0,r.jsx)(n.NL,{when:e,message:t}));i.defaultProps={when:!0};const o=i},5555:(e,t,s)=>{s.d(t,{Z:()=>p});var r=s(7557),a=s(2772),n=s(2248),i=s(6954),o=s(3060),c=s(3569);const l=(0,a.Z)((({palette:e,spacing:t})=>({bufferDisplay:{display:"flex",flexDirection:"column","&:not(:first-child)":{paddingLeft:t(1)}},buffer:{display:"flex"},bufferCells:{display:"flex",flexDirection:"column",padding:t(.5),border:`2px solid ${e.divider}`,overflowY:"auto","& + &":{borderLeft:0}},bufferCellsInverted:{flexDirection:"column-reverse"}}))),u=({values:e,maxLength:t,invert:s})=>{const a=l();return(0,r.jsx)("div",Object.assign({className:(0,o.Z)(a.bufferCells,{[a.bufferCellsInverted]:s})},{children:(0,i.Z)(t).map((t=>(0,r.jsx)(c.Z,{value:e[t]},t)))}))},d=({className:e,label:t,values:s,secondaryValues:a,maxLength:i,invert:c})=>{const d=l();return(0,r.jsxs)("div",Object.assign({className:(0,o.Z)(d.bufferDisplay,e)},{children:[(0,r.jsx)(n.Z,Object.assign({variant:"body2"},{children:t})),(0,r.jsxs)("div",Object.assign({className:d.buffer},{children:[(0,r.jsx)(u,{values:s,maxLength:i,invert:c}),a&&(0,r.jsx)(u,{values:a,maxLength:i,invert:c})]}))]}))};d.defaultProps={invert:!1};const p=d},8676:(e,t,s)=>{s.d(t,{Z:()=>m});var r=s(7557),a=s(9526),n=s(2772),i=s(3060),o=s(4180),c=s(2262),l=(s(4803),s(7103));s(2566);class u extends(0,l.getAceInstance)().require("ace/mode/text_highlight_rules").TextHighlightRules{constructor(){super(),this.$rules={start:[{token:"comment",regex:";.*$"}]}}}class d extends(0,l.getAceInstance)().require("ace/mode/plain_text").Mode{constructor(){super(),this.HighlightRules=u,this.lineCommentStart=";"}}const p=(0,n.Z)((({palette:e})=>({codeEditor:{display:"flex",overflowY:"auto",backgroundColor:e.background.default,textTransform:"none"},errorSpan:{position:"absolute",backgroundColor:e.error.dark},activeInstruction:{position:"absolute",backgroundColor:e.grey[600]}}))),m=({className:e})=>{const t=p(),{compiledState:s,sourceCode:n,setSourceCode:l}=(0,a.useContext)(o.R),u=[],m=[];switch(null==s?void 0:s.type){case"compiled":{const{machineState:{programCounter:e,runtimeError:r}}=s,a=s.instructions[e];if(a&&u.push(Object.assign(Object.assign({},(0,o.k)(a.span)),{className:t.activeInstruction,type:"fullLine"})),r){const e=(0,o.k)(r.span);u.push(Object.assign(Object.assign({},e),{className:t.activeInstruction,type:"fullLine"})),m.push({row:e.startRow,column:e.startCol,text:r.text,type:"error"})}}break;case"error":s.errors.forEach((e=>{const s=(0,o.k)(e.span);u.push(Object.assign(Object.assign({},s),{className:t.errorSpan,type:"text"})),m.push({row:s.startRow,column:s.startCol,text:e.text,type:"error"})}))}return(0,r.jsx)("div",Object.assign({className:(0,i.Z)(e,t.codeEditor)},{children:(0,r.jsx)(c.ZP,{name:"gdlk-editor",mode:"text",theme:"terminal",width:"100%",height:"100%",onLoad:e=>{const t=new d;e.getSession().setMode(t)},value:n,annotations:m,markers:u,onChange:l})}))}},1717:(e,t,s)=>{s.d(t,{Z:()=>Z});var r=s(7557),a=s(9526),n=s(2772),i=s(5349),o=s(1858),c=s(5433),l=s(341),u=s(9322),d=s(1612),p=s(7725),m=s(4180),g=s(3060),h=s(9110),f=s(3167),x=s(7097);const v=(0,n.Z)({loading:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}),b=e=>{var{title:t,loading:s,color:a,children:n}=e,i=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s}(e,["title","loading","color","children"]);const o=v(),c=(0,r.jsx)(h.Z,Object.assign({"aria-label":t,color:a},s?{"aria-busy":"true","aria-live":"polite"}:{},i,{children:s?(0,r.jsx)(f.Z,{className:o.loading,color:"default"===a?"inherit":a,size:24}):n}));return t?(0,r.jsx)(x.ZP,Object.assign({title:t},{children:(0,r.jsx)("span",{children:c})})):c};b.defaultProps={loading:!1};const j=b,y=[2,20],S=(0,n.Z)((({palette:e,spacing:t})=>({controls:{display:"flex",justifyContent:"end",alignItems:"center",backgroundColor:e.background.default},buttons:{padding:t(1)},speedSelect:{padding:t(1)},speedSelectButton:{minWidth:48}}))),Z=({className:e})=>{const t=S(),{compiledState:s,stepping:n,setStepping:h,execute:f,reset:x}=(0,a.useContext)(m.R),v=(0,a.useCallback)((()=>f(!1)),[f]),[b,Z]=(0,a.useState)(y[0]),w=(0,a.useRef)(),C="compiled"===(null==s?void 0:s.type)?s.machineState:void 0;(0,a.useEffect)((()=>{window.clearInterval(w.current),n&&(w.current=window.setInterval(v,1e3/b))}),[v,n,b,w]);const k=Boolean(null==C?void 0:C.terminated);return(0,a.useEffect)((()=>{k&&(window.clearInterval(w.current),h(!1))}),[k,h]),(0,r.jsxs)("div",Object.assign({className:(0,g.Z)(t.controls,e)},{children:[(0,r.jsxs)("div",Object.assign({className:t.buttons},{children:[(0,r.jsx)(j,Object.assign({title:"Execute Next Instruction",disabled:!C||C.terminated||n,onClick:v},{children:(0,r.jsx)(i.Z,{})})),(0,r.jsx)(j,Object.assign({title:n?"Pause Execution":"Execute Program",disabled:!C||C.terminated,onClick:()=>h((e=>!e))},{children:n?(0,r.jsx)(o.Z,{}):(0,r.jsx)(c.Z,{})})),(0,r.jsx)(j,Object.assign({title:"Execute to End",disabled:!C||C.terminated||n,onClick:()=>f(!0)},{children:(0,r.jsx)(l.Z,{})})),(0,r.jsx)(j,Object.assign({title:"Reset Program",disabled:!C||0===C.cycleCount,onClick:()=>{x(),h(!1)}},{children:(0,r.jsx)(u.Z,{})}))]})),(0,r.jsx)(d.Z,Object.assign({className:t.speedSelect,value:b,exclusive:!0,onChange:(e,t)=>{null!==t&&Z(t)}},{children:y.map(((e,s)=>(0,r.jsx)(p.Z,Object.assign({className:t.speedSelectButton,value:e,"aria-label":`${e} times speed`},{children:">".repeat(s+1)}),e)))}))]}))}},9433:(e,t,s)=>{s.d(t,{Z:()=>u});var r=s(7557),a=s(9526),n=s(4180),i=s(2772),o=s(5555),c=s(3060);const l=(0,i.Z)((({palette:e,spacing:t})=>({ioBuffers:{backgroundColor:e.background.default,padding:t(1),display:"flex"}}))),u=({className:e})=>{var t,s;const i=l(),{wasmProgramSpec:u,compiledState:d}=(0,a.useContext)(n.R),p=Array.from(u.input),m=Array.from(u.expectedOutput),g="compiled"===(null==d?void 0:d.type)?d.machineState:void 0;return(0,r.jsxs)("div",Object.assign({className:(0,c.Z)(i.ioBuffers,e)},{children:[(0,r.jsx)(o.Z,{label:"Input",values:null!==(t=null==g?void 0:g.input)&&void 0!==t?t:p,maxLength:p.length}),(0,r.jsx)(o.Z,{label:"Output",values:m,secondaryValues:null!==(s=null==g?void 0:g.output)&&void 0!==s?s:[],maxLength:m.length})]}))}},3569:(e,t,s)=>{s.d(t,{Z:()=>c});var r=s(7557),a=s(2772),n=s(2248),i=s(3060);const o=(0,a.Z)((()=>({langValueDisplay:{minWidth:60,textAlign:"right",lineHeight:1.1}}))),c=({className:e,value:t})=>{const s=o();return(0,r.jsx)(n.Z,Object.assign({className:(0,i.Z)(e,s.langValueDisplay)},{children:null!=t?t:"-"}))}},7657:(e,t,s)=>{s.a(e,(async(e,r)=>{try{s.d(t,{Z:()=>y});var a=s(7557),n=s(9526),i=s(2772),o=s(8676),c=s(8077),l=s(4180),u=s(9433),d=s(9609),p=s(1717),m=s(6368),g=s(8157),h=s(6615),f=s(9990),x=s(7672),v=s(7141),b=e([m,f]);[m,f]=b.then?(await b)():b;const j=(0,i.Z)((({palette:e,spacing:t})=>{const s=`2px solid ${e.divider}`;return{programIde:{textTransform:"uppercase",width:"100%",height:"100%",display:"grid",gridTemplateRows:"auto auto 1fr 1fr",gridTemplateColumns:"auto 1fr auto auto",gridTemplateAreas:"\n      'io rg rg sk'\n      'io st ct sk'\n      'io ed ed sk'\n      'io ed ed sk'\n      ",border:s},registersInfo:{gridArea:"rg",borderBottom:s,borderRight:s},ioInfo:{gridArea:"io",borderRight:s},programStatus:{gridArea:"st",borderBottom:s},controls:{gridArea:"ct",borderBottom:s,borderRight:s},editor:{gridArea:"ed",borderRight:s},stackInfo:{gridArea:"sk",padding:t(1)}}})),y=({puzzle:e})=>{var t;const s=j(),[r,i]=(0,x.FV)((0,v.FZ)({puzzleSlug:e.slug})),b=(0,x.sJ)(v.o_),[y,S]=(0,n.useState)(r.sourceCode),{wasmHardwareSpec:Z,wasmProgramSpec:w,compiledState:C,compile:k,execute:O}=(0,f.Z)({hardwareSpec:b,puzzle:e,sourceCode:y}),[N,R]=(0,n.useState)(!1),I=(0,g.Z)(y,1e3);(0,n.useEffect)((()=>{i((e=>Object.assign(Object.assign({},e),{sourceCode:I}))),I.trim()&&k(I)}),[I,k,i]);const E="compiled"===(null==C?void 0:C.type)?C.machineState:void 0,L=null!==(t=null==E?void 0:E.successful)&&void 0!==t&&t;(0,n.useEffect)((()=>{L&&i((e=>Object.assign(Object.assign({},e),{solved:!0})))}),[L,i]);const P={wasmHardwareSpec:Z,wasmProgramSpec:w,sourceCode:y,compiledState:C,setSourceCode:S,stepping:N,setStepping:R,execute:O,reset:()=>k(y)};return(0,a.jsx)(l.R.Provider,Object.assign({value:P},{children:(0,a.jsxs)("div",Object.assign({className:s.programIde},{children:[(0,a.jsx)(c.Z,{className:s.registersInfo}),(0,a.jsx)(u.Z,{className:s.ioInfo}),(0,a.jsx)(m.Z,{className:s.programStatus}),(0,a.jsx)(p.Z,{className:s.controls}),b.numStacks>0&&(0,a.jsx)(d.Z,{className:s.stackInfo}),(0,a.jsx)(o.Z,{className:s.editor}),(0,a.jsx)(h.Z,{when:y!==r.sourceCode,message:"You have unsaved changes. Are you sure you want to leave?"})]}))}))};r()}catch(e){r(e)}}))},4550:(e,t,s)=>{s.a(e,(async(e,r)=>{try{s.r(t),s.d(t,{default:()=>d});var a=s(7557),n=s(5092),i=s(7657),o=s(7904),c=s(9966),l=s(250),u=e([i]);i=(u.then?(await u)():u)[0];const d=()=>{const{puzzleSlug:e}=(0,n.UO)(),t=l.$[e];return(0,a.jsx)(c.Z,Object.assign({fullScreen:!0},{children:t?(0,a.jsx)(i.Z,{puzzle:t}):(0,a.jsx)(o.Z,{})}))};r()}catch(e){r(e)}}))},6368:(e,t,s)=>{s.a(e,(async(e,r)=>{try{s.d(t,{Z:()=>p});var a=s(7557),n=s(9526),i=s(4180),o=s(3060),c=s(2772);const{FailureReason:l}=await s.e(356).then(s.bind(s,5356)),u=(0,c.Z)((({spacing:e})=>({programStatus:{padding:e(1)}})));function d(e,t){var s;if(!e)return"";if("error"===e.type)return"Error - Compilation failure";const r=e.machineState;if(!r.terminated&&!t)return"Ready";if(!r.terminated&&t)return"Running...";if(r.successful)return"Success";switch(r.failureReason){case l.RuntimeError:return`Error - ${null===(s=r.runtimeError)||void 0===s?void 0:s.text}`;case l.RemainingInput:return"Failure - Values remain in input buffer";case l.IncorrectOutput:return"Failure - Output did not match expectation";default:return console.error(`Unexpected program failure state: ${r.failureReason}`),"Failure"}}const p=({className:e})=>{var t;const s=u(),{stepping:r,compiledState:c}=(0,n.useContext)(i.R),l="compiled"===(null==c?void 0:c.type)?c.machineState:void 0;return(0,a.jsxs)("div",Object.assign({className:(0,o.Z)(e,s.programStatus)},{children:[(0,a.jsxs)("div",{children:["CPU Cycles: ",null!==(t=null==l?void 0:l.cycleCount)&&void 0!==t?t:"â€“"]}),(0,a.jsx)("div",{children:d(c,r)})]}))};r()}catch(m){r(m)}}),1)},8077:(e,t,s)=>{s.d(t,{Z:()=>p});var r=s(7557),a=s(9526),n=s(4180),i=s(2772),o=s(2248),c=s(3569),l=s(3060);const u=(0,i.Z)((({palette:e,spacing:t})=>({registers:{padding:t(1),backgroundColor:e.background.default,display:"flex"},register:{display:"flex",flexDirection:"column",alignItems:"flex-end","&:not(:first-child)":{paddingLeft:t(2)}}}))),d=({name:e,value:t})=>{const s=u();return(0,r.jsxs)("div",Object.assign({className:s.register},{children:[(0,r.jsx)(o.Z,{children:e}),(0,r.jsx)(c.Z,{value:t})]}))},p=({className:e})=>{const t=u(),{wasmHardwareSpec:s,compiledState:i}=(0,a.useContext)(n.R),o="compiled"===(null==i?void 0:i.type)?i.machineState:void 0;return(0,r.jsx)("div",Object.assign({className:(0,l.Z)(t.registers,e)},{children:s.registers.map((e=>(0,r.jsx)(d,{name:e,value:null==o?void 0:o.registers[e]},e)))}))}},9609:(e,t,s)=>{s.d(t,{Z:()=>u});var r=s(7557),a=s(9526),n=s(4180),i=s(2772),o=s(5555),c=s(3060);const l=(0,i.Z)((({palette:e,spacing:t})=>({stackInfo:{display:"flex",flexDirection:"column",padding:t(1),backgroundColor:e.background.default,height:"100%"},stack:{maxHeight:"100%",paddingLeft:"0 !important"}}))),u=({className:e})=>{const t=l(),{wasmHardwareSpec:s,compiledState:i}=(0,a.useContext)(n.R),u="compiled"===(null==i?void 0:i.type)?i.machineState:void 0;return(0,r.jsx)("div",Object.assign({className:(0,c.Z)(t.stackInfo,e)},{children:s.stacks.map((e=>{var a;return(0,r.jsx)(o.Z,{className:t.stack,invert:!0,label:e,values:null!==(a=null==u?void 0:u.stacks[e])&&void 0!==a?a:[],maxLength:s.max_stack_length},e)}))}))}},9990:(e,t,s)=>{s.a(e,(async(e,r)=>{try{s.d(t,{Z:()=>u});var a=s(5097),n=s(9526),i=s(2191),o=e([i]);i=(o.then?(await o)():o)[0];const{HardwareSpec:c,ProgramSpec:l}=await s.e(356).then(s.bind(s,5356)),u=({hardwareSpec:e,puzzle:t,sourceCode:s})=>{const r=(0,a.Z)((()=>new c(e.numRegisters,e.numStacks,e.maxStackLength))),o=(0,a.Z)((()=>new l(Int32Array.from(t.input),Int32Array.from(t.expectedOutput)))),u=(0,n.useRef)(),[d,p]=(0,n.useState)(),m=(0,n.useCallback)((e=>{switch(u.current=e,null==e?void 0:e.type){case"compiled":p({type:"compiled",instructions:e.instructions,machineState:e.machine.state});break;case"error":p({type:"error",errors:e.errors});break;case void 0:p(void 0)}}),[u]),g=(0,n.useCallback)((e=>{m(i.S.compile(r,o,e))}),[r,o,m]),h=(0,n.useCallback)(((e=!1)=>{var t;if("compiled"!==(null===(t=u.current)||void 0===t?void 0:t.type))throw new Error("Program is not compiled, cannot execute next instruction.");u.current.machine.execute(e),m(u.current)}),[u,m]);return(0,n.useEffect)((()=>()=>m(void 0)),[r,o,s,m]),{wasmHardwareSpec:r,wasmProgramSpec:o,compiledState:d,compile:g,execute:h}};r()}catch(e){r(e)}}),1)},8157:(e,t,s)=>{s.d(t,{Z:()=>n});var r=s(9526),a=s(7124);const n=(e,t)=>{const[s,n]=(0,r.useState)(e),i=(0,r.useCallback)((0,a.Z)((e=>{n(e)}),t),[t]);return(0,r.useEffect)((()=>{i(e)}),[e,i]),s}},5097:(e,t,s)=>{s.d(t,{Z:()=>a});var r=s(9526);const a=e=>{const t=(0,r.useRef)({initialized:!1,value:void 0});return t.current.initialized||(t.current={initialized:!0,value:e()}),t.current.value}},4180:(e,t,s)=>{function r(e){return{startRow:e.start_line-1,startCol:e.start_col-1,endRow:e.end_line-1,endCol:e.end_col}}s.d(t,{R:()=>a,k:()=>r});const a=s(9526).createContext({})},2191:(e,t,s)=>{s.a(e,(async(e,r)=>{try{s.d(t,{S:()=>c});var a=s(1003);const n=await s.e(356).then(s.bind(s,5356));function i(e){return"text"in e&&"span"in e}class o{constructor(e){this.machine=e,this._state=o.getMachineState(e)}static getMachineState(e){return{programCounter:e.programCounter,input:Array.from(e.input),output:Array.from(e.output),registers:e.registers,stacks:e.stacks,cycleCount:e.cycleCount,terminated:e.terminated,successful:e.successful,runtimeError:e.error,failureReason:e.failureReason}}updateState(){this._state=o.getMachineState(this.machine)}execute(e){e?this.machine.executeAll():this.machine.executeNext(),this.updateState()}get state(){return this._state}}class c{static compile(e,t,s){try{const r=n.compile(e,t,s);return{type:"compiled",instructions:r.instructions,machine:new o(r.machine)}}catch(e){if((0,a.f)(i,e))return{type:"error",errors:e};throw e}}}r()}catch(l){r(l)}}),1)}}]);