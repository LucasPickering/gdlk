(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[550],{6615:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(9526),n=a(5092);const s=({when:e,message:t})=>((0,r.useEffect)((()=>{if(e){const e=e=>{e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}}),[e]),r.createElement(n.NL,{when:e,message:t}));s.defaultProps={when:!0};const l=s},5555:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var r=a(9526),n=a(2772),s=a(2248),l=a(8704),c=a(3060),o=a(3569);const i=(0,n.Z)((({palette:e,spacing:t})=>({bufferDisplay:{display:"flex",flexDirection:"column","&:not(:first-child)":{paddingLeft:t(1)}},buffer:{display:"flex"},bufferCells:{display:"flex",flexDirection:"column",padding:t(.5),border:`2px solid ${e.divider}`,overflowY:"auto","& + &":{borderLeft:0}},bufferCellsInverted:{flexDirection:"column-reverse"}}))),u=({values:e,maxLength:t,invert:a})=>{const n=i();return r.createElement("div",{className:(0,c.Z)(n.bufferCells,{[n.bufferCellsInverted]:a})},(0,l.Z)(t).map((t=>r.createElement(o.Z,{key:t,value:e[t]}))))},d=({className:e,label:t,values:a,secondaryValues:n,maxLength:l,invert:o})=>{const d=i();return r.createElement("div",{className:(0,c.Z)(d.bufferDisplay,e)},r.createElement(s.Z,{variant:"body2"},t),r.createElement("div",{className:d.buffer},r.createElement(u,{values:a,maxLength:l,invert:o}),n&&r.createElement(u,{values:n,maxLength:l,invert:o})))};d.defaultProps={invert:!1};const m=d},8676:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var r=a(9526),n=a(2772),s=a(3060),l=a(4180),c=a(2262),o=(a(4803),a(7103));a(2566);class i extends(0,o.getAceInstance)().require("ace/mode/text_highlight_rules").TextHighlightRules{constructor(){super(),this.$rules={start:[{token:"comment",regex:";.*$"}]}}}class u extends(0,o.getAceInstance)().require("ace/mode/plain_text").Mode{constructor(){super(),this.HighlightRules=i,this.lineCommentStart=";"}}const d=(0,n.Z)((({palette:e})=>({codeEditor:{display:"flex",overflowY:"auto",backgroundColor:e.background.default},errorSpan:{position:"absolute",backgroundColor:e.error.dark},activeInstruction:{position:"absolute",backgroundColor:e.grey[600]}}))),m=({className:e})=>{const t=d(),{compiledState:a,sourceCode:n,setSourceCode:o}=(0,r.useContext)(l.R),i=[],m=[];switch(null==a?void 0:a.type){case"compiled":{const{machineState:{programCounter:e,runtimeError:r}}=a,n=a.instructions[e];if(n&&i.push(Object.assign(Object.assign({},(0,l.k)(n.span)),{className:t.activeInstruction,type:"fullLine"})),r){const e=(0,l.k)(r.span);i.push(Object.assign(Object.assign({},e),{className:t.activeInstruction,type:"fullLine"})),m.push({row:e.startRow,column:e.startCol,text:r.text,type:"error"})}}break;case"error":a.errors.forEach((e=>{const a=(0,l.k)(e.span);i.push(Object.assign(Object.assign({},a),{className:t.errorSpan,type:"screenLine"})),m.push({row:a.startRow,column:a.startCol,text:e.text,type:"error"})}))}return r.createElement("div",{className:(0,s.Z)(e,t.codeEditor)},r.createElement(c.ZP,{name:"gdlk-editor",mode:"text",theme:"terminal",width:"100%",height:"100%",onLoad:e=>{const t=new u;e.getSession().setMode(t)},value:n,annotations:m,markers:i,onChange:o}))}},2950:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var r=a(9526),n=a(2772),s=a(5349),l=a(1858),c=a(5433),o=a(341),i=a(9322),u=a(1612),d=a(7725),m=a(4180),p=a(3060),g=a(7732);const f=[2,20],v=(0,n.Z)((({palette:e,spacing:t})=>({controls:{display:"flex",justifyContent:"end",alignItems:"center",backgroundColor:e.background.default},buttons:{padding:t(1)},speedSelect:{padding:t(1)},speedSelectButton:{minWidth:48}}))),h=({className:e})=>{const t=v(),{compiledState:a,execute:n,reset:h}=(0,r.useContext)(m.R),E=(0,r.useCallback)((()=>n(!1)),[n]),[x,S]=(0,r.useState)(!1),[Z,b]=(0,r.useState)(f[0]),k=(0,r.useRef)(),y="compiled"===(null==a?void 0:a.type)?a.machineState:void 0;(0,r.useEffect)((()=>{window.clearInterval(k.current),x&&(k.current=window.setInterval(E,1e3/Z))}),[E,x,Z,k]);const w=Boolean(null==y?void 0:y.terminated);return(0,r.useEffect)((()=>{w&&(window.clearInterval(k.current),S(!1))}),[w]),r.createElement("div",{className:(0,p.Z)(t.controls,e)},r.createElement("div",{className:t.buttons},r.createElement(g.Z,{title:"Execute Next Instruction",disabled:!y||y.terminated||x,onClick:E},r.createElement(s.Z,null)),r.createElement(g.Z,{title:x?"Pause Execution":"Execute Program",disabled:!y||y.terminated,onClick:()=>S((e=>!e))},x?r.createElement(l.Z,null):r.createElement(c.Z,null)),r.createElement(g.Z,{title:"Execute to End",disabled:!y||y.terminated||x,onClick:()=>n(!0)},r.createElement(o.Z,null)),r.createElement(g.Z,{title:"Reset Program",disabled:!y||0===y.cycleCount,onClick:()=>{h(),S(!1)}},r.createElement(i.Z,null))),r.createElement(u.Z,{className:t.speedSelect,value:Z,exclusive:!0,onChange:(e,t)=>{null!==t&&b(t)}},f.map(((e,a)=>r.createElement(d.Z,{className:t.speedSelectButton,key:e,value:e,"aria-label":`${e} times speed`},">".repeat(a+1))))))}},9433:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(9526),n=a(4180),s=a(2772),l=a(2248),c=a(5555),o=a(3060);const i=(0,s.Z)((({palette:e,spacing:t})=>({ioInfo:{backgroundColor:e.background.default,padding:t(1)},buffers:{display:"flex"}}))),u=({className:e})=>{var t,a;const s=i(),{wasmProgramSpec:u,compiledState:d}=(0,r.useContext)(n.R),m=Array.from(u.input),p=Array.from(u.expectedOutput),g="compiled"===(null==d?void 0:d.type)?d.machineState:void 0;return r.createElement("div",{className:(0,o.Z)(s.ioInfo,e)},r.createElement(l.Z,{variant:"h3"},"I/O"),r.createElement("div",{className:s.buffers},r.createElement(c.Z,{label:"Input",values:null!==(t=null==g?void 0:g.input)&&void 0!==t?t:m,maxLength:m.length}),r.createElement(c.Z,{label:"Output",values:p,secondaryValues:null!==(a=null==g?void 0:g.output)&&void 0!==a?a:[],maxLength:p.length})))}},3569:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(9526),n=a(2772),s=a(2248),l=a(3060);const c=(0,n.Z)((()=>({langValueDisplay:{minWidth:60,textAlign:"right",lineHeight:1.1}}))),o=({className:e,value:t})=>{const a=c();return r.createElement(s.Z,{className:(0,l.Z)(e,a.langValueDisplay)},null!=t?t:"-")}},7657:(e,t,a)=>{"use strict";a.a(e,(async e=>{a.d(t,{Z:()=>x});var r=a(9526),n=a(2772),s=a(8676),l=a(8077),c=a(4180),o=a(9433),i=a(9609),u=a(2950),d=a(6368),m=a(8157),p=a(6615),g=a(9990),f=a(6164),v=a(3505),h=e([g]);g=(h.then?await h:h)[0];const E=(0,n.Z)((({palette:e,spacing:t})=>{const a=`2px solid ${e.divider}`;return{programIde:{width:"100%",height:"100%",display:"grid",gridTemplateRows:"auto auto 1fr 1fr",gridTemplateColumns:"auto 1fr auto auto",gridTemplateAreas:"\n      'io rg rg sk'\n      'io st ct sk'\n      'io ed ed sk'\n      'io ed ed sk'\n      ",border:a},registersInfo:{gridArea:"rg",borderBottom:a,borderRight:a},ioInfo:{gridArea:"io",borderRight:a},programStatus:{gridArea:"st",borderBottom:a},controls:{gridArea:"ct",borderBottom:a,borderRight:a},editor:{gridArea:"ed",borderRight:a},stackInfo:{gridArea:"sk",padding:t(1)}}})),x=({puzzle:e,puzzleSolution:t})=>{const a=E(),{setSolutionSourceCode:n}=(0,r.useContext)(v.e),[h,x]=(0,r.useState)(f.I.k200),[S,Z]=(0,r.useState)(t.sourceCode),{wasmHardwareSpec:b,wasmProgramSpec:k,compiledState:y,compile:w,execute:C}=(0,g.Z)({hardwareSpec:h,puzzle:e,sourceCode:S}),N=(0,m.Z)(S,250);(0,r.useEffect)((()=>{n(e.slug,t.fileName,N),N&&w(N)}),[e.slug,t.fileName,N,w]);const I={wasmHardwareSpec:b,wasmProgramSpec:k,sourceCode:S,compiledState:y,setSourceCode:Z,execute:C,reset:()=>w(S)};return r.createElement(c.R.Provider,{value:I},r.createElement("div",{className:a.programIde},r.createElement(l.Z,{className:a.registersInfo}),r.createElement(o.Z,{className:a.ioInfo}),r.createElement(d.Z,{className:a.programStatus}),r.createElement(u.Z,{className:a.controls}),r.createElement(i.Z,{className:a.stackInfo}),r.createElement(s.Z,{className:a.editor}),r.createElement(p.Z,{when:S!==t.sourceCode,message:"You have unsaved changes. Are you sure you want to leave?"})))}}))},4550:(e,t,a)=>{"use strict";a.a(e,(async e=>{a.r(t),a.d(t,{default:()=>d});var r=a(9526),n=a(5092),s=a(7657),l=a(7904),c=a(1091),o=a(250),i=a(3505),u=e([s]);s=(u.then?await u:u)[0];const d=()=>{const{puzzleSlug:e,fileName:t}=(0,n.UO)(),a=o.$[e],{getPuzzleSolution:u}=(0,r.useContext)(i.e),d=u(e,t);return r.createElement(c.Z,{fullScreen:!0,navProps:{backLink:{to:`/puzzles/${e}`,label:"Back to Puzzle"}}},a&&d?r.createElement(s.Z,{puzzle:a,puzzleSolution:d}):r.createElement(l.Z,null))}}))},6368:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var r=a(9526),n=a(4180),s=a(3060);const l=(0,a(2772).Z)((({spacing:e})=>({programStatus:{padding:e(1)}}))),c=({className:e})=>{var t;const a=l(),{compiledState:c}=(0,r.useContext)(n.R),o="compiled"===(null==c?void 0:c.type)?c.machineState:void 0;return r.createElement("div",{className:(0,s.Z)(e,a.programStatus)},r.createElement("div",null,"CPU Cycles: ",null!==(t=null==o?void 0:o.cycleCount)&&void 0!==t?t:"â€“"),o&&r.createElement("div",null,function(e){return e.terminated?e.successful?"SUCCESS":"FAILURE":"..."}(o)))}},8077:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(9526),n=a(4180),s=a(2772),l=a(2248),c=a(3569),o=a(3060);const i=(0,s.Z)((({palette:e,spacing:t})=>({registersInfo:{padding:t(1),backgroundColor:e.background.default},registers:{display:"flex"},register:{display:"flex",flexDirection:"column",alignItems:"flex-end","&:not(:first-child)":{paddingLeft:t(2)}}}))),u=({name:e,value:t})=>{const a=i();return r.createElement("div",{className:a.register},r.createElement(l.Z,null,e),r.createElement(c.Z,{value:t}))},d=({className:e})=>{const t=i(),{wasmHardwareSpec:a,compiledState:s}=(0,r.useContext)(n.R),c="compiled"===(null==s?void 0:s.type)?s.machineState:void 0;return r.createElement("div",{className:(0,o.Z)(t.registersInfo,e)},r.createElement(l.Z,{variant:"h3"},"Registers"),r.createElement("div",{className:t.registers},a.registers.map((e=>r.createElement(u,{key:e,name:e,value:null==c?void 0:c.registers[e]})))))}},9609:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(9526),n=a(4180),s=a(2772),l=a(2248),c=a(5555),o=a(3060);const i=(0,s.Z)((({palette:e,spacing:t})=>({stackInfo:{display:"flex",flexDirection:"column",padding:t(1),backgroundColor:e.background.default,height:"100%"},stacks:{display:"flex",flexGrow:1,maxHeight:"100%"},stack:{maxHeight:"100%"}}))),u=({className:e})=>{const t=i(),{wasmHardwareSpec:a,compiledState:s}=(0,r.useContext)(n.R),u="compiled"===(null==s?void 0:s.type)?s.machineState:void 0;return 0===a.num_stacks?null:r.createElement("div",{className:(0,o.Z)(t.stackInfo,e)},r.createElement(l.Z,{variant:"h3"},"Stacks"),r.createElement("div",{className:t.stacks},a.stacks.map((e=>{var n;return r.createElement(c.Z,{className:t.stack,key:e,invert:!0,label:e,values:null!==(n=null==u?void 0:u.stacks[e])&&void 0!==n?n:[],maxLength:a.max_stack_length})}))))}},9990:(e,t,a)=>{"use strict";a.a(e,(async e=>{a.d(t,{Z:()=>i});var r=a(5097),n=a(9526),s=a(2191),l=e([s]);s=(l.then?await l:l)[0];const{HardwareSpec:c,ProgramSpec:o}=await a.e(356).then(a.bind(a,5356)),i=({hardwareSpec:e,puzzle:t,sourceCode:a})=>{const l=(0,r.Z)((()=>new c(e.numRegisters,e.numStacks,e.maxStackLength))),i=(0,r.Z)((()=>new o(Int32Array.from(t.input),Int32Array.from(t.expectedOutput)))),u=(0,n.useRef)(),[d,m]=(0,n.useState)(),p=(0,n.useCallback)((e=>{switch(u.current=e,null==e?void 0:e.type){case"compiled":m({type:"compiled",instructions:e.instructions,machineState:e.machine.state});break;case"error":m({type:"error",errors:e.errors});break;case void 0:m(void 0)}}),[u]),g=(0,n.useCallback)((e=>{p(s.S.compile(l,i,e))}),[l,i,p]),f=(0,n.useCallback)(((e=!1)=>{var t;if("compiled"!==(null===(t=u.current)||void 0===t?void 0:t.type))throw new Error("Program is not compiled, cannot execute next instruction.");u.current.machine.execute(e),p(u.current)}),[u,p]);return(0,n.useEffect)((()=>()=>p(void 0)),[l,i,a,p]),{wasmHardwareSpec:l,wasmProgramSpec:i,compiledState:d,compile:g,execute:f}};e()}),1)},8157:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(9526),n=a(1671);const s=(e,t)=>{const[a,s]=(0,r.useState)(e),l=(0,r.useCallback)((0,n.Z)((e=>{s(e)}),t),[t]);return(0,r.useEffect)((()=>{l(e)}),[e,l]),a}},4180:(e,t,a)=>{"use strict";function r(e){return{startRow:e.start_line-1,startCol:e.start_col-1,endRow:e.end_line-1,endCol:e.end_col}}a.d(t,{k:()=>r,R:()=>n});const n=a(9526).createContext({})},2191:(e,t,a)=>{"use strict";a.a(e,(async e=>{a.d(t,{S:()=>c});var r=a(1003);const n=await a.e(356).then(a.bind(a,5356));function s(e){return"text"in e&&"span"in e}class l{constructor(e){this.machine=e,this._state=l.getMachineState(e)}static getMachineState(e){return{programCounter:e.programCounter,input:Array.from(e.input),output:Array.from(e.output),registers:e.registers,stacks:e.stacks,cycleCount:e.cycleCount,terminated:e.terminated,successful:e.successful,runtimeError:e.error}}updateState(){this._state=l.getMachineState(this.machine)}execute(e){e?this.machine.executeAll():this.machine.executeNext(),this.updateState()}get state(){return this._state}}class c{static compile(e,t,a){try{const r=n.compile(e,t,a);return{type:"compiled",instructions:r.instructions,machine:new l(r.machine)}}catch(e){if((0,r.f)(s,e))return{type:"error",errors:e};throw e}}}e()}),1)},1003:(e,t,a)=>{"use strict";function r(e,t){return t instanceof Array&&t.every((t=>e(t)))}a.d(t,{f:()=>r})}}]);