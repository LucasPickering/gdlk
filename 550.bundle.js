(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[550],{6615:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r(9526),n=r(5092);const s=({when:e,message:t})=>((0,a.useEffect)((()=>{if(e){const e=e=>{e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}}),[e]),a.createElement(n.NL,{when:e,message:t}));s.defaultProps={when:!0};const l=s},5555:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var a=r(9526),n=r(2772),s=r(2248),l=r(8704),c=r(3060),o=r(3569);const i=(0,n.Z)((({palette:e,spacing:t})=>({bufferDisplay:{display:"flex",flexDirection:"column","&:not(:first-child)":{paddingLeft:t(1)}},buffer:{display:"flex"},bufferCells:{display:"flex",flexDirection:"column",padding:t(.5),border:`2px solid ${e.divider}`,overflowY:"auto","& + &":{borderLeft:0}},bufferCellsInverted:{flexDirection:"column-reverse"}}))),u=({values:e,maxLength:t,invert:r})=>{const n=i();return a.createElement("div",{className:(0,c.Z)(n.bufferCells,{[n.bufferCellsInverted]:r})},(0,l.Z)(t).map((t=>a.createElement(o.Z,{key:t,value:e[t]}))))},d=({className:e,label:t,values:r,secondaryValues:n,maxLength:l,invert:o})=>{const d=i();return a.createElement("div",{className:(0,c.Z)(d.bufferDisplay,e)},a.createElement(s.Z,{variant:"body2"},t),a.createElement("div",{className:d.buffer},a.createElement(u,{values:r,maxLength:l,invert:o}),n&&a.createElement(u,{values:n,maxLength:l,invert:o})))};d.defaultProps={invert:!1};const m=d},8676:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var a=r(9526),n=r(2772),s=r(3060),l=r(4180),c=r(2262),o=(r(4803),r(7103));r(2566);class i extends(0,o.getAceInstance)().require("ace/mode/text_highlight_rules").TextHighlightRules{constructor(){super(),this.$rules={start:[{token:"comment",regex:";.*$"}]}}}class u extends(0,o.getAceInstance)().require("ace/mode/plain_text").Mode{constructor(){super(),this.HighlightRules=i,this.lineCommentStart=";"}}const d=(0,n.Z)((({palette:e})=>({codeEditor:{display:"flex",overflowY:"auto",backgroundColor:e.background.default},errorSpan:{position:"absolute",backgroundColor:e.error.dark},activeInstruction:{position:"absolute",backgroundColor:e.grey[600]}}))),m=({className:e})=>{const t=d(),{compiledState:r,sourceCode:n,setSourceCode:o}=(0,a.useContext)(l.R),i=[],m=[];switch(null==r?void 0:r.type){case"compiled":{const{machineState:{programCounter:e,runtimeError:a}}=r,n=r.instructions[e];if(n&&i.push(Object.assign(Object.assign({},(0,l.k)(n.span)),{className:t.activeInstruction,type:"fullLine"})),a){const e=(0,l.k)(a.span);i.push(Object.assign(Object.assign({},e),{className:t.activeInstruction,type:"fullLine"})),m.push({row:e.startRow,column:e.startCol,text:a.text,type:"error"})}}break;case"error":r.errors.forEach((e=>{const r=(0,l.k)(e.span);i.push(Object.assign(Object.assign({},r),{className:t.errorSpan,type:"text"})),m.push({row:r.startRow,column:r.startCol,text:e.text,type:"error"})}))}return a.createElement("div",{className:(0,s.Z)(e,t.codeEditor)},a.createElement(c.ZP,{name:"gdlk-editor",mode:"text",theme:"terminal",width:"100%",height:"100%",onLoad:e=>{const t=new u;e.getSession().setMode(t)},value:n,annotations:m,markers:i,onChange:o}))}},2950:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var a=r(9526),n=r(2772),s=r(5349),l=r(1858),c=r(5433),o=r(341),i=r(9322),u=r(1612),d=r(7725),m=r(4180),p=r(3060),g=r(7732);const f=[2,20],v=(0,n.Z)((({palette:e,spacing:t})=>({controls:{display:"flex",justifyContent:"end",alignItems:"center",backgroundColor:e.background.default},buttons:{padding:t(1)},speedSelect:{padding:t(1)},speedSelectButton:{minWidth:48}}))),h=({className:e})=>{const t=v(),{compiledState:r,stepping:n,setStepping:h,execute:x,reset:E}=(0,a.useContext)(m.R),S=(0,a.useCallback)((()=>x(!1)),[x]),[b,Z]=(0,a.useState)(f[0]),k=(0,a.useRef)(),y="compiled"===(null==r?void 0:r.type)?r.machineState:void 0;(0,a.useEffect)((()=>{window.clearInterval(k.current),n&&(k.current=window.setInterval(S,1e3/b))}),[S,n,b,k]);const w=Boolean(null==y?void 0:y.terminated);return(0,a.useEffect)((()=>{w&&(window.clearInterval(k.current),h(!1))}),[w,h]),a.createElement("div",{className:(0,p.Z)(t.controls,e)},a.createElement("div",{className:t.buttons},a.createElement(g.Z,{title:"Execute Next Instruction",disabled:!y||y.terminated||n,onClick:S},a.createElement(s.Z,null)),a.createElement(g.Z,{title:n?"Pause Execution":"Execute Program",disabled:!y||y.terminated,onClick:()=>h((e=>!e))},n?a.createElement(l.Z,null):a.createElement(c.Z,null)),a.createElement(g.Z,{title:"Execute to End",disabled:!y||y.terminated||n,onClick:()=>x(!0)},a.createElement(o.Z,null)),a.createElement(g.Z,{title:"Reset Program",disabled:!y||0===y.cycleCount,onClick:()=>{E(),h(!1)}},a.createElement(i.Z,null))),a.createElement(u.Z,{className:t.speedSelect,value:b,exclusive:!0,onChange:(e,t)=>{null!==t&&Z(t)}},f.map(((e,r)=>a.createElement(d.Z,{className:t.speedSelectButton,key:e,value:e,"aria-label":`${e} times speed`},">".repeat(r+1))))))}},9433:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(9526),n=r(4180),s=r(2772),l=r(5555),c=r(3060);const o=(0,s.Z)((({palette:e,spacing:t})=>({ioBuffers:{backgroundColor:e.background.default,padding:t(1),display:"flex"}}))),i=({className:e})=>{var t,r;const s=o(),{wasmProgramSpec:i,compiledState:u}=(0,a.useContext)(n.R),d=Array.from(i.input),m=Array.from(i.expectedOutput),p="compiled"===(null==u?void 0:u.type)?u.machineState:void 0;return a.createElement("div",{className:(0,c.Z)(s.ioBuffers,e)},a.createElement(l.Z,{label:"Input",values:null!==(t=null==p?void 0:p.input)&&void 0!==t?t:d,maxLength:d.length}),a.createElement(l.Z,{label:"Output",values:m,secondaryValues:null!==(r=null==p?void 0:p.output)&&void 0!==r?r:[],maxLength:m.length}))}},3569:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(9526),n=r(2772),s=r(2248),l=r(3060);const c=(0,n.Z)((()=>({langValueDisplay:{minWidth:60,textAlign:"right",lineHeight:1.1}}))),o=({className:e,value:t})=>{const r=c();return a.createElement(s.Z,{className:(0,l.Z)(e,r.langValueDisplay)},null!=t?t:"-")}},7657:(e,t,r)=>{"use strict";r.a(e,(async e=>{r.d(t,{Z:()=>E});var a=r(9526),n=r(2772),s=r(8676),l=r(8077),c=r(4180),o=r(9433),i=r(9609),u=r(2950),d=r(6368),m=r(8157),p=r(6615),g=r(9990),f=r(6164),v=r(3505),h=e([d,g]);[d,g]=h.then?await h:h;const x=(0,n.Z)((({palette:e,spacing:t})=>{const r=`2px solid ${e.divider}`;return{programIde:{textTransform:"uppercase",width:"100%",height:"100%",display:"grid",gridTemplateRows:"auto auto 1fr 1fr",gridTemplateColumns:"auto 1fr auto auto",gridTemplateAreas:"\n      'io rg rg sk'\n      'io st ct sk'\n      'io ed ed sk'\n      'io ed ed sk'\n      ",border:r},registersInfo:{gridArea:"rg",borderBottom:r,borderRight:r},ioInfo:{gridArea:"io",borderRight:r},programStatus:{gridArea:"st",borderBottom:r},controls:{gridArea:"ct",borderBottom:r,borderRight:r},editor:{gridArea:"ed",borderRight:r},stackInfo:{gridArea:"sk",padding:t(1)}}})),E=({puzzle:e,puzzleSolution:t})=>{const r=x(),{setSolutionSourceCode:n}=(0,a.useContext)(v.e),[h,E]=(0,a.useState)(f.I.k200),[S,b]=(0,a.useState)(t.sourceCode),{wasmHardwareSpec:Z,wasmProgramSpec:k,compiledState:y,compile:w,execute:C}=(0,g.Z)({hardwareSpec:h,puzzle:e,sourceCode:S}),[N,R]=(0,a.useState)(!1),I=(0,m.Z)(S,250);(0,a.useEffect)((()=>{n(e.slug,t.fileName,I),I&&w(I)}),[e.slug,t.fileName,I,w]);const z={wasmHardwareSpec:Z,wasmProgramSpec:k,sourceCode:S,compiledState:y,setSourceCode:b,stepping:N,setStepping:R,execute:C,reset:()=>w(S)};return a.createElement(c.R.Provider,{value:z},a.createElement("div",{className:r.programIde},a.createElement(l.Z,{className:r.registersInfo}),a.createElement(o.Z,{className:r.ioInfo}),a.createElement(d.Z,{className:r.programStatus}),a.createElement(u.Z,{className:r.controls}),h.numStacks>0&&a.createElement(i.Z,{className:r.stackInfo}),a.createElement(s.Z,{className:r.editor}),a.createElement(p.Z,{when:S!==t.sourceCode,message:"You have unsaved changes. Are you sure you want to leave?"})))}}))},4550:(e,t,r)=>{"use strict";r.a(e,(async e=>{r.r(t),r.d(t,{default:()=>d});var a=r(9526),n=r(5092),s=r(7657),l=r(7904),c=r(1091),o=r(250),i=r(3505),u=e([s]);s=(u.then?await u:u)[0];const d=()=>{const{puzzleSlug:e,fileName:t}=(0,n.UO)(),r=o.$[e],{getPuzzleSolution:u}=(0,a.useContext)(i.e),d=u(e,t);return a.createElement(c.Z,{fullScreen:!0,navProps:{backLink:{to:`/puzzles/${e}`,label:"Back to Puzzle"}}},r&&d?a.createElement(s.Z,{puzzle:r,puzzleSolution:d}):a.createElement(l.Z,null))}}))},6368:(e,t,r)=>{"use strict";r.a(e,(async e=>{r.d(t,{Z:()=>i});var a=r(9526),n=r(4180),s=r(3060),l=r(2772);const{FailureReason:c}=await r.e(356).then(r.bind(r,5356)),o=(0,l.Z)((({spacing:e})=>({programStatus:{padding:e(1)}}))),i=({className:e})=>{var t;const r=o(),{stepping:l,compiledState:i}=(0,a.useContext)(n.R),u="compiled"===(null==i?void 0:i.type)?i.machineState:void 0;return a.createElement("div",{className:(0,s.Z)(e,r.programStatus)},a.createElement("div",null,"CPU Cycles: ",null!==(t=null==u?void 0:u.cycleCount)&&void 0!==t?t:"â€“"),a.createElement("div",null,function(e,t){var r;if(!e)return"Error - Compilation failure";if(!e.terminated&&!t)return"Ready";if(!e.terminated&&t)return"Running...";if(e.successful)return"Success";switch(e.failureReason){case c.RuntimeError:return`Error - ${null===(r=e.runtimeError)||void 0===r?void 0:r.text}`;case c.RemainingInput:return"Failure - Input buffer not empty";case c.IncorrectOutput:return"Failure - Output did not match expectation";default:return console.error(`Unexpected program failure state: ${e.failureReason}`),"Failure"}}(u,l)))};e()}),1)},8077:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r(9526),n=r(4180),s=r(2772),l=r(2248),c=r(3569),o=r(3060);const i=(0,s.Z)((({palette:e,spacing:t})=>({registers:{padding:t(1),backgroundColor:e.background.default,display:"flex"},register:{display:"flex",flexDirection:"column",alignItems:"flex-end","&:not(:first-child)":{paddingLeft:t(2)}}}))),u=({name:e,value:t})=>{const r=i();return a.createElement("div",{className:r.register},a.createElement(l.Z,null,e),a.createElement(c.Z,{value:t}))},d=({className:e})=>{const t=i(),{wasmHardwareSpec:r,compiledState:s}=(0,a.useContext)(n.R),l="compiled"===(null==s?void 0:s.type)?s.machineState:void 0;return a.createElement("div",{className:(0,o.Z)(t.registers,e)},r.registers.map((e=>a.createElement(u,{key:e,name:e,value:null==l?void 0:l.registers[e]}))))}},9609:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(9526),n=r(4180),s=r(2772),l=r(5555),c=r(3060);const o=(0,s.Z)((({palette:e,spacing:t})=>({stackInfo:{display:"flex",flexDirection:"column",padding:t(1),backgroundColor:e.background.default,height:"100%"},stack:{maxHeight:"100%",paddingLeft:"0 !important"}}))),i=({className:e})=>{const t=o(),{wasmHardwareSpec:r,compiledState:s}=(0,a.useContext)(n.R),i="compiled"===(null==s?void 0:s.type)?s.machineState:void 0;return a.createElement("div",{className:(0,c.Z)(t.stackInfo,e)},r.stacks.map((e=>{var n;return a.createElement(l.Z,{className:t.stack,key:e,invert:!0,label:e,values:null!==(n=null==i?void 0:i.stacks[e])&&void 0!==n?n:[],maxLength:r.max_stack_length})})))}},9990:(e,t,r)=>{"use strict";r.a(e,(async e=>{r.d(t,{Z:()=>i});var a=r(5097),n=r(9526),s=r(2191),l=e([s]);s=(l.then?await l:l)[0];const{HardwareSpec:c,ProgramSpec:o}=await r.e(356).then(r.bind(r,5356)),i=({hardwareSpec:e,puzzle:t,sourceCode:r})=>{const l=(0,a.Z)((()=>new c(e.numRegisters,e.numStacks,e.maxStackLength))),i=(0,a.Z)((()=>new o(Int32Array.from(t.input),Int32Array.from(t.expectedOutput)))),u=(0,n.useRef)(),[d,m]=(0,n.useState)(),p=(0,n.useCallback)((e=>{switch(u.current=e,null==e?void 0:e.type){case"compiled":m({type:"compiled",instructions:e.instructions,machineState:e.machine.state});break;case"error":m({type:"error",errors:e.errors});break;case void 0:m(void 0)}}),[u]),g=(0,n.useCallback)((e=>{p(s.S.compile(l,i,e))}),[l,i,p]),f=(0,n.useCallback)(((e=!1)=>{var t;if("compiled"!==(null===(t=u.current)||void 0===t?void 0:t.type))throw new Error("Program is not compiled, cannot execute next instruction.");u.current.machine.execute(e),p(u.current)}),[u,p]);return(0,n.useEffect)((()=>()=>p(void 0)),[l,i,r,p]),{wasmHardwareSpec:l,wasmProgramSpec:i,compiledState:d,compile:g,execute:f}};e()}),1)},8157:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(9526),n=r(1671);const s=(e,t)=>{const[r,s]=(0,a.useState)(e),l=(0,a.useCallback)((0,n.Z)((e=>{s(e)}),t),[t]);return(0,a.useEffect)((()=>{l(e)}),[e,l]),r}},4180:(e,t,r)=>{"use strict";function a(e){return{startRow:e.start_line-1,startCol:e.start_col-1,endRow:e.end_line-1,endCol:e.end_col}}r.d(t,{k:()=>a,R:()=>n});const n=r(9526).createContext({})},2191:(e,t,r)=>{"use strict";r.a(e,(async e=>{r.d(t,{S:()=>c});var a=r(1003);const n=await r.e(356).then(r.bind(r,5356));function s(e){return"text"in e&&"span"in e}class l{constructor(e){this.machine=e,this._state=l.getMachineState(e)}static getMachineState(e){return{programCounter:e.programCounter,input:Array.from(e.input),output:Array.from(e.output),registers:e.registers,stacks:e.stacks,cycleCount:e.cycleCount,terminated:e.terminated,successful:e.successful,runtimeError:e.error,failureReason:e.failureReason}}updateState(){this._state=l.getMachineState(this.machine)}execute(e){e?this.machine.executeAll():this.machine.executeNext(),this.updateState()}get state(){return this._state}}class c{static compile(e,t,r){try{const a=n.compile(e,t,r);return{type:"compiled",instructions:a.instructions,machine:new l(a.machine)}}catch(e){if((0,a.f)(s,e))return{type:"error",errors:e};throw e}}}e()}),1)},1003:(e,t,r)=>{"use strict";function a(e,t){return t instanceof Array&&t.every((t=>e(t)))}r.d(t,{f:()=>a})}}]);